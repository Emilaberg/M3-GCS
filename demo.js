const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

ctx.canvas.width = window.innerWidth;
ctx.canvas.height = window.innerWidth;

// Alla tecken/bokstäver, uppritade i 1 dimensionell array. Bredd: 7, Höjd: 8.
let chars = {
    A: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    B: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    C: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    D: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 1, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    E: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    F: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    G: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    H: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    I: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    J: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    K: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 1, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    L: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    M: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    N: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 0, 0, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 0, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    O: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    P: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    Q: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    R: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    S: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 1, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    T: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    U: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    V: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    W: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    X: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    Y: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    Z: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 1, 1, 0,
        0, 0, 0, 1, 1, 0, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 1, 1, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    0: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    1: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 1, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    2: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 0, 0, 0, 1, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 1, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    3: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    4: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 1, 1, 0, 1, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    5: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 1, 1, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    6: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    7: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    8: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    9: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    '.': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    ',': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    ';': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    ':': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    '$': [0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 1, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0],

    ';': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    ';': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    '!': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    ' ': [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    a: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    b: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    c: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    d: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 1, 1, 1, 0,
        0, 0, 1, 0, 0, 1, 0,
        0, 0, 0, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    e: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    f: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    g: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 1, 0,
        0, 0, 1, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    h: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    i: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    j: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    k: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 1, 1, 0, 0, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    l: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    m: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 1, 0, 0, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    n: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 1, 1, 0, 0,
        0, 1, 1, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    o: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    p: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    q: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 0,
        0, 0, 1, 0, 0, 1, 0,
        0, 0, 0, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    r: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 1, 1, 0, 0,
        0, 1, 1, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    s: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 1, 0,
        0, 1, 1, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    t: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    u: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    v: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    w: [0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    x: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    y: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 1, 1, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    z: [0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 1, 1, 0,
        0, 0, 0, 1, 1, 0, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 1, 1, 0, 0, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0],

    '"': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 1, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0
    ],

    '/': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0
    ],

    '?': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 0,
        0, 0, 1, 0, 0, 1, 0,
        0, 0, 0, 0, 1, 1, 0,
        0, 0, 0, 1, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0
    ],

    '%': [
        0, 0, 0, 0, 0, 0, 0,
        0, 1, 1, 0, 0, 1, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 0, 0, 1, 1, 0, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 1, 1, 0, 1, 1, 0,
        0, 1, 0, 0, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0
    ],

    '&': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 0, 1, 1, 0, 1, 0,
        0, 1, 0, 0, 1, 0, 0,
        0, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0
    ],

    '(': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0],

    ')': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0
    ],

    '@': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 1, 1, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 1, 1, 1, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0
    ],

    '-': [
        0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 1, 1, 0, 0,
        0, 1, 0, 0, 0, 1, 0,
        0, 1, 0, 1, 1, 1, 0,
        0, 1, 0, 1, 0, 1, 0,
        0, 1, 0, 1, 1, 1, 0,
        0, 0, 1, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0
    ],
    

}

            // Colors
            // Red - 150
            // Brown - 130
            // Beige/gul - 250
            // Black - 0
            // Blue - 75
            // 200

let mario = {
    'run1': [200, 200, 200, 200, 200, 150, 150, 150, 150, 150, 200, 200, 200, 200, 200, 200,
             200, 200, 200, 200, 150, 150, 150, 150, 150, 150, 150, 150, 150, 200, 200, 200,
             200, 200, 200, 200, 130, 130, 130, 250, 250, 000, 250, 200, 200, 200, 200, 200,
             200, 200, 200, 130, 250, 130, 250, 250, 250, 000, 250, 250, 250, 200, 200, 200,
             200, 200, 200, 130, 250, 130, 130, 250, 250, 250, 000, 250, 250, 250, 200, 200,
             200, 200, 200, 130, 130, 250, 250, 250, 250, 000, 000, 000, 000, 200, 200, 200,
             200, 200, 200, 200, 200, 250, 250, 250, 250, 250, 250, 250, 200, 200, 200, 200,
             200, 200, 150, 150, 150, 150, 075, 150, 150, 150, 075, 200, 200, 200, 200, 200,
             250, 250, 150, 150, 150, 150, 075, 075, 150, 150, 150, 075, 150, 250, 250, 250,
             250, 250, 250, 200, 150, 150, 075, 075, 075, 075, 075, 075, 150, 150, 250, 250, 
             250, 250, 200, 200, 075, 075, 075, 250, 075, 075, 075, 250, 200, 200, 130, 200, //
             200, 200, 200, 075, 075, 075, 075, 075, 075, 075, 075, 075, 075, 130, 130, 200,
             200, 200, 075, 075, 075, 075, 075, 075, 075, 075, 075, 075, 075, 130, 130, 200,
             200, 130, 130, 075, 075, 075, 200, 200, 200, 200, 075, 075, 075, 130, 130, 200,
             200, 130, 130, 130, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200,
             200, 200, 130, 130, 130, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200

        ],

    'run2': [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200,   
             200, 200, 200, 200, 200, 150, 150, 150, 150, 150, 200, 200, 200, 200, 200, 200,
             200, 200, 200, 200, 150, 150, 150, 150, 150, 150, 150, 150, 150, 200, 200, 200,
             200, 200, 200, 200, 130, 130, 130, 250, 250, 000, 250, 200, 200, 200, 200, 200,
             200, 200, 200, 130, 250, 130, 250, 250, 250, 000, 250, 250, 250, 200, 200, 200,
             200, 200, 200, 130, 250, 130, 130, 250, 250, 250, 000, 250, 250, 250, 200, 200,
             200, 200, 200, 130, 130, 250, 250, 250, 250, 000, 000, 000, 000, 200, 200, 200,
             200, 200, 200, 200, 200, 250, 250, 250, 250, 250, 250, 250, 200, 200, 200, 200,
             200, 200, 200, 200, 150, 150, 150, 075, 150, 150, 200, 200, 200, 200, 200, 200,
             200, 200, 200, 150, 150, 150, 150, 075, 075, 150, 150, 200, 200, 200, 200, 200,
             200, 200, 200, 150, 150, 150, 075, 075, 250, 075, 075, 200, 200, 200, 200, 200, //
             200, 200, 200, 150, 150, 150, 150, 075, 075, 075, 075, 200, 200, 200, 200, 200,
             200, 200, 200, 075, 150, 150, 250, 250, 075, 075, 075, 200, 200, 200, 200, 200,
             200, 200, 200, 200, 075, 150, 250, 250, 075, 075, 200, 200, 200, 200, 200, 200,
             200, 200, 200, 200, 200, 075, 075, 075, 130, 130, 130, 200, 200, 200, 200, 200,
             200, 200, 200, 200, 200, 130, 130, 130, 130, 200, 200, 200, 200, 200, 200, 200         
            ],

    'run3': [200, 200, 200, 200, 200, 150, 150, 150, 150, 150, 200, 200, 200, 200, 200, 200,
             200, 200, 200, 200, 150, 150, 150, 150, 150, 150, 150, 150, 150, 200, 200, 200,
             200, 200, 200, 200, 130, 130, 130, 250, 250, 000, 250, 200, 200, 200, 200, 200,
             200, 200, 200, 130, 250, 130, 250, 250, 250, 000, 250, 250, 250, 200, 200, 200,
             200, 200, 200, 130, 250, 130, 130, 250, 250, 250, 000, 250, 250, 250, 200, 200,
             200, 200, 200, 130, 130, 250, 250, 250, 250, 000, 000, 000, 000, 200, 200, 200,
             200, 200, 200, 200, 200, 250, 250, 250, 250, 250, 250, 250, 200, 200, 200, 200, 
             200, 200, 200, 200, 200, 200, 150, 150, 075, 075, 150, 200, 200, 200, 200, 200, 
             200, 200, 200, 200, 200, 150, 150, 150, 150, 075, 150, 250, 250, 200, 200, 200, 
             200, 200, 200, 250, 250, 150, 150, 150, 150, 150, 150, 250, 250, 250, 200, 200, 
             200, 200, 250, 250, 250, 075, 150, 150, 150, 150, 150, 250, 250, 200, 200, 200, 
             200, 200, 200, 130, 130, 075, 075, 075, 075, 075, 075, 075, 200, 200, 200, 200, 
             200, 200, 200, 130, 075, 075, 075, 075, 075, 075, 075, 075, 200, 200, 200, 200, 
             200, 200, 130, 130, 075, 075, 200, 200, 075, 075, 075, 200, 200, 200, 200, 200, 
             200, 200, 130, 200, 200, 200, 200, 130, 130, 130, 200, 200, 200, 200, 200, 200, 
             200, 200, 200, 200, 200, 200, 200, 200, 130, 130, 130, 200, 200, 200, 200, 200 
            ]

}

class BITMAP {                                                                                  //Class BITMAP
    constructor(width, height) {                                                                                    
        this.WIDTH = width;
        this.HEIGHT = height;
        this.PLANE =  new Array(width).fill(0).map(() => new Array(height).fill(0));            //Plane - 2 dimensionell array 
    }

    bitmapMaker(character) {                                                                    //Används för att skriva ut tecken/bokstäver
        let q = character.length;                                                               //q = antalet tecken/bokstäver
        let bitmap = new Array(8).fill(0).map(() => new Array(7 * q).fill(0));                  //bitmap - en array. Höjd: 8 (chars höjd), bredd: 7 multiplicerat med antalet tecken.

        for (let a = 0; a < q; a++) {                                                           //För varje tecken ska loopen köras.
            for (let i = 0; i < 7; i++) {                                                       //Loopen körs för varje kolumn för ett tecken/bokstav (7 gånger)
                for (let j = 0; j < 8; j++) {                                                   //Loopen körs för varje rad för ett tecken bokstav (8 gånger)
                    bitmap[j][i + (7 * a)] = chars[character[a]][j * 7 + i];                    //bitmapArray för x och y, om ett eller flera tecken redan har körst så kommer exempelvis x=0 + 7*1, detta görs för att flera tecken ska kunna skrivas bredvid varandra, utan att köra över. 
                }                                                                               //chars[character[a]][j * 7 + i] - chars[för tecken/bokstav[där vi står]][koordinater]
            }
        }
        this.PLANE = bitmap;                                                                    //PLANE = bitmap
        this.HEIGHT = 8;
        this.WIDTH = 7 * q;
        console.log(bitmap);
    }

    spriteMaker(sprite){
        let bitmap = new Array(16).fill(0).map(() => new Array(16).fill(0));

        for (let i = 0; i < 16; i++) {                                                       
            for (let j = 0; j < 16; j++) {                                                   
                bitmap[i][j] = mario[sprite][j * 16 + i];   
            }                                                                               
        }

        this.PLANE = bitmap;
        this.HEIGHT = 16;
        this.WIDTH = 16;
    }
}

class DISPLAY {
    #LOCK;

    constructor(width, height) {
        this.WIDTH = width;
        this.HEIGHT = height;
        this.PLANE = new Array(width * height).fill(0);
        // this.PLANE = new Array(width).fill(0).map(element => new Array(height).fill(0));
        this.ZOOM = 0;
        this.#LOCK;
    }

    to1D(x, y) {
        return y * this.WIDTH + x;
    }

    gridMap(func) {
        for (let x = 0; x < this.WIDTH; x++) {
            for (let y = 0; y < this.HEIGHT; y++) {
                this.PLANE[this.to1D(x)(y)] = func(i)(j);
            }
        }
    }

    putPixel(x, y, color) {
        this.PLANE[this.to1D(x, y)] = color;
    }

    implicitFunc(func, color) {
        const allEqual = a => a.every(element => element === a[0]);
        let tempDisp = new Array(this.WIDTH+1).fill(0).map(() => new Array(this.HEIGHT+1).fill(0)).map((s1,x) => s1.map((s2,y) => Math.sign(func(x)(y))));

        for(let x = 0; x < this.WIDTH; x++) {
            for(let y = 0; y < this.HEIGHT; y++) {
                if(!allEqual([tempDisp[x][y],tempDisp[x+1][y],tempDisp[x][y+1],tempDisp[x+1][y+1]].filter(element => element !== 0))) {
                    this.putPixel(x,y,color);
                }
            }
        }
    }

    mandelBrot() {
        const Square = z => [z[0]**2 - z[1]**2, 2*z[0]*z[1]];
        const abs = z => z[0]**2 + z[1]**2;
        const Add = z => c => [z[0]+c[0],z[1]+c[1]]
        const inMandelbrot = fix(f => (z=[0,0]) => (i=0) => c => abs(z) <= 4 ? i > 255 ? 255 : f(Add(Square(z))(c))(i+1)(c) : 2*i)()();
        for(let x = 0; x < this.WIDTH; x++) {
            for(let y = 0; y < this.HEIGHT; y++) {
                // if(inMandelbrot([x/250-1.5,y/250-1.3])) {
                //     this.putPixel(x,y,255);
                // } else {
                //     this.putPixel(x,y,0);
                // }
                this.putPixel(x,y,inMandelbrot([x/500-1.5,y/500-1.3]));
            }
        }
        
    }

    line(x1, y1, x2, y2, color) {
        const f = x => y => (y2-y1)*x + (x1-x2)*y + (x2*y1-x1*y2);
        // const f = x => y => (x - x2) * (y2 - y1) - (x2 - x1) * (y - y2);
        const A2 = (x2 - x1) ** 2 + (y2 - y1) ** 2;

        for (let i = 0; i < this.WIDTH; i++) {
            for (let j = 0; j < this.HEIGHT; j++) {
                let B2 = (i - x1) ** 2 + (j - y1) ** 2;
                let C2 = (x2 - i) ** 2 + (y2 - j) ** 2;

                if (A2 + B2 - C2 >= 0 && A2 + C2 - B2 >= 0 && 4*(f(i)(j) ** 2) - A2 < 0) {
                    this.putPixel(i,j,color);
                }
            }
        }
    }

    circle(x1, y1, diameter, color) {
        let radius = diameter / 2;
        for (let i = 0; i < this.WIDTH; i++) {
            for (let j = 0; j < this.HEIGHT; j++) {
                if (diameter % 2 === 0) {
                    if (((i - x1 + 0.5) ** 2 + (j - y1 + 0.5) ** 2) - radius ** 2 <= 0) {
                        this.putPixel(i,j,color);
                    }
                } else {
                    if (((i - x1) ** 2 + (j - y1) ** 2) - radius ** 2 <= 0) {
                        this.putPixel(i,j,color);
                    }
                }                
            }
        }
    }

    rectangle(x1, y1, x2, y2, color) {
        for (let i = 0; i < this.WIDTH; i++) {
            for (let j = 0; j < this.HEIGHT; j++) {
                if (i >= x1 && i <= x2 && j >= y1 && j <= y2) {
                    this.PLANE[this.to1D(i, j)] = color;
                }
            }
        }
    }

    clear(color) {
        this.PLANE = this.PLANE.map(() => color);
    }

    resize(width, height) {
        this.PLANE = new Array(width * height).fill(0);
        this.WIDTH = width;
        this.HEIGHT = height;
    }

    blitToDisplay(BITMAp, width, height, bx, by, dx, dy) {
        for (let i = bx; i < bx+width; i++) {
            for (let j = by; j < by+height; j++) {
                this.PLANE[this.to1D(i-bx+dx,j-by+dy)] = BITMAp.PLANE[i][j];
                this.render();
            }
        }
    }

    blitToBitmap(width, height,bx, by, dx, dy) {                        //width, height - Bredd och höjd för det valda området. bx, by - startkoordinater på bitmap. dx, dy - slutkoordinater på display

        if(dx-width < -1 || dy-height < -1){                            //Felhantering, om värdena är större än displayen
            alert('Error!');
            return;
        }

        let a = by;                                                     //Lagrar by (by kommer att förändras längre ned)
        
        let temp = new BITMAP(width+bx, height+by);                     //temp array i BITMAP, där kopian läggs
        for (let x = dx-(width-1); x <= dx; x++) {                      // för alla valda kolumner (x-värden)
            for (let y = dy-(height-1); y <= dy; y++) {                 // för alla valda rader (y-värden), inom det valda x-området

                temp.PLANE[bx][by] = this.PLANE[this.to1D(x, y)];       // Kopierar det valda området till den temporära array'n.

                by++;                                                   //by adderas med 1 för att ändra y-position för bitmap
                if(by == a+height){                                     //En if-sats som gör så att by börjar om för att raderna på en ny kolumn ska bli samma som tidigare
                    by = a;
                }
                
            }
            bx++;                                                       //bx adderas med 1 för att "byta" kolumn
        }
        BITMAP.PLANE = temp.PLANE;                                      //Bitmap plane ska bli lika med den temporära arrayn
        console.log(this.PLANE);                                        
        console.log(temp.PLANE);
        return temp;                                                    //Returnerar temp

                                                                        // Översiktlig förklaring: Först går man igenom den första valda kolumn för området, sedan går man igenom alla rader på den kolumn som har valts, sedan går man vidare till nästa kolumn osv...
                                                                        // Alla de koordinater kopieras sedan till temp, med en start på koordinat (bx,by).
        
    }

    textOut(x, y, color, string) {
        let temp = new BITMAP();
        temp.bitmapMaker(string);

        for (let i = x; i < this.WIDTH && i - x < temp.WIDTH; i++) {
            for (let j = y; j < this.HEIGHT && j - y < temp.HEIGHT; j++) {
                if (temp.PLANE[j - y][i - x] === 1) {
                    this.PLANE[this.to1D(i, j)] = color;
                }
            }
        }
    }

    modulo(a,b) {
        return a - b*Math.floor(a/b);
    }

    scrollLeft() {
        for (let x = 1; x <= this.WIDTH; x++) {
            for (let y = 1; y <= this.HEIGHT; y++) {
                this.PLANE[(x+this.WIDTH*(y-1))-1] = this.PLANE[(x+this.WIDTH*(y-1))];
            }
        }
        for (let y = 1; y <= this.HEIGHT; y++) {
            this.PLANE[(this.WIDTH+this.WIDTH*(y-1))-1] = 0;
        }
    }

    scrollRight() {
        for (let x = this.WIDTH; x > 1; x--) {
            for (let y = 1; y <= this.HEIGHT; y++) {
                this.PLANE[(x+this.WIDTH*(y-1))-1] = this.PLANE[(x+this.WIDTH*(y-1))-2];
            }
        }
        for (let y = 1; y <= this.HEIGHT; y++) {
            this.PLANE[(1+this.WIDTH*(y-1))-1] = 0;
        }
    }

    scrollUp() {
        for (let y = 0; y < this.HEIGHT-1; y++) {
            for (let x = 0; x < this.WIDTH; x++) {
                this.PLANE[this.to1D(x, y)] = this.PLANE[this.to1D(x, y+1)];
            }
        }
        for(let x = 0; x < this.WIDTH; x++){
            // this.PLANE[x][this.HEIGHT - 1] = 0;
            this.PLANE[this.to1D(x, this.HEIGHT - 1)] = 0;
        }
    }

    scrollDown() {
        for (let y = this.HEIGHT; y > 0; y--) {
            for (let x = 0; x < this.WIDTH; x++) {
                this.PLANE[this.to1D(x, y)] = this.PLANE[this.to1D(x, y -1)];
            }
        }
        for(let x = 0; x < this.WIDTH; x++){
            this.PLANE[this.to1D(x, 0)] = 0;
        }
    }

    pscrollLeft() {
        let temparray = new Array(this.WIDTH);
        for (let y = 1; y <= this.HEIGHT; y++) {
            temparray[y-1] = this.PLANE[(1+this.WIDTH*(y-1))-1];
        }
        for (let x = 1; x <= this.WIDTH; x++) {
            for (let y = 1; y <= this.HEIGHT; y++) {
                this.PLANE[(x+this.WIDTH*(y-1))-1] = this.PLANE[(x+this.WIDTH*(y-1))];
            }
        }
        for (let y = 1; y <= this.HEIGHT; y++) {
            this.PLANE[(this.WIDTH+this.WIDTH*(y-1))-1] = temparray[y-1];
        }
    }

    pscrollRight() {
        let temparray = new Array(this.WIDTH);
        for (let y = 1; y <= this.HEIGHT; y++) {
            temparray[y-1] = this.PLANE[(this.WIDTH+this.WIDTH*(y-1))-1]
        }
        for (let x = this.WIDTH; x > 1; x--) {
            for (let y = 1; y <= this.HEIGHT; y++) {
                this.PLANE[(x+this.WIDTH*(y-1))-1] = this.PLANE[(x+this.WIDTH*(y-1))-2];
            }
        }
        for (let y = 1; y <= this.HEIGHT; y++) {
            this.PLANE[(1+this.WIDTH*(y-1))-1] = temparray[y-1];
        }
    }

    pscrollUp() {
        let temparray = new Array(this.HEIGHT);
        for(let x = 0; x < this.WIDTH; x++){
            temparray[x] = this.PLANE[this.to1D(x, 0)];
        }
        for (let y = 0; y < this.HEIGHT-1; y++) {
            for (let x = 0; x < this.WIDTH; x++) {
                this.PLANE[this.to1D(x, y)] = this.PLANE[this.to1D(x, y+1)];
            }
        }
        for(let x = 0; x < this.WIDTH; x++){
            this.PLANE[this.to1D(x, this.HEIGHT - 1)] = temparray[x];
        }
    }

    pscrollDown() {
        let temparray = new Array(this.HEIGHT);
        for(let x = 0; x < this.WIDTH; x++){
            temparray[x] = this.PLANE[this.to1D(x, this.HEIGHT - 1)];
        }
        for (let y = this.HEIGHT; y > 0; y--) {
            for (let x = 0; x < this.WIDTH; x++) {
                this.PLANE[this.to1D(x, y)] = this.PLANE[this.to1D(x, y -1)];
            }
        }
        for(let x = 0; x < this.WIDTH; x++){
            this.PLANE[this.to1D(x, 0)] = temparray[x];
        }
    }

    render() {
        let dx = Math.round(canvas.width / this.WIDTH);
        let dy = Math.round(canvas.height / this.HEIGHT);
        for (let i = 0; i < this.WIDTH; i++) {
            for (let j = 0; j < this.HEIGHT; j++) {
                ctx.fillStyle = 'rgb(' + this.PLANE[this.to1D(i, j)] + ',' + this.PLANE[this.to1D(i, j)] + ',' + this.PLANE[this.to1D(i, j)] + ')';
                ctx.fillRect(i * dx, j * dy, dx, dy);
            }
        }
    }
}

let hello = new DISPLAY(50,50);

let presActive = false;
function presBtn() {
    presActive = !presActive;
}

// window.addEventListener('load', () => {
//     hello.line(0, 4, 4, 0, 100);
//     hello.render();
// })

// För varje gång som trycker på en av pil-tangenterna så ska scroll köras i samma riktning som pilen, om preserve = true, ska pScroll köras

window.addEventListener('keydown', (event) => {
    if (presActive == false) {
        if(event.key == 'ArrowLeft') {
            hello.pscrollLeft();
        }
        if(event.key == 'ArrowRight') {
            hello.pscrollRight();
        }
        if(event.key == 'ArrowDown') {
            hello.pscrollDown();
        }
        if(event.key == 'ArrowUp') {
            hello.pscrollUp();
        }
    }
    else {
        if(event.key == 'ArrowLeft') {
            hello.scrollLeft();
        }
        if(event.key == 'ArrowRight') {
            hello.scrollRight();
        }
        if(event.key == 'ArrowDown') {
            hello.scrollDown();
        }
        if(event.key == 'ArrowUp') {
            hello.scrollUp();
        }
    }
    hello.render();
})

let time = 0;

let textfield = document.querySelector('.textfield');

let demoTrue = false;
let sessionOne = true;
let sessionTwo = false;
let sessionThree = false;
let sessionFour = false;
let sessionFive = false;
let sessionSix = false;
let sessionSeven = false;
function render() {

    if(demoTrue == true && sessionOne == true){
        textfield.innerHTML = 'Putpixel';
        for(let i = 0; i < 256; i++){
            let b = Math.floor(Math.random()*50);
            let c = Math.floor(Math.random()*50);
            
            hello.putPixel(b, c, i);

        }
        timeA();
    }

    if(demoTrue == true && sessionTwo == true){

        textfield.innerHTML = 'Putpixel and scrolldown';

        setTimeout(function(){ 
            hello.scrollDown();
            hello.putPixel(49, 0, 5);
            hello.putPixel(48, 0, 10);
            hello.putPixel(47, 0, 15);
            hello.putPixel(46, 0, 20);
            hello.putPixel(45, 0, 25);
            hello.putPixel(44, 0, 30);
            hello.putPixel(43, 0, 35);
            hello.putPixel(42, 0, 40);
            hello.putPixel(41, 0, 45);
            hello.putPixel(40, 0, 50);
            hello.putPixel(39, 0, 55);
            hello.putPixel(38, 0, 60);
            hello.putPixel(37, 0, 65);
            hello.putPixel(36, 0, 70);
            hello.putPixel(35, 0, 75);
            hello.putPixel(34, 0, 80);
            hello.putPixel(33, 0, 85);
            hello.putPixel(32, 0, 90);
            hello.putPixel(31, 0, 95);
            hello.putPixel(30, 0, 105);
            hello.putPixel(29, 0, 110);
            hello.putPixel(28, 0, 115);
            hello.putPixel(27, 0, 120);
            hello.putPixel(26, 0, 125);
            hello.putPixel(25, 0, 130);
            hello.putPixel(24, 0, 135);
            hello.putPixel(23, 0, 140);
            hello.putPixel(22, 0, 145);
            hello.putPixel(21, 0, 150);
            hello.putPixel(20, 0, 155);
            hello.putPixel(19, 0, 160);
            hello.putPixel(18, 0, 165);
            hello.putPixel(17, 0, 170);
            hello.putPixel(16, 0, 175);
            hello.putPixel(15, 0, 180);
            hello.putPixel(14, 0, 185);
            hello.putPixel(13, 0, 190);
            hello.putPixel(12, 0, 195);
            hello.putPixel(11, 0, 200);
            hello.putPixel(10, 0, 205);
            hello.putPixel(9, 0, 210);
            hello.putPixel(8, 0, 215);
            hello.putPixel(7, 0, 220);
            hello.putPixel(6, 0, 225);
            hello.putPixel(5, 0, 230);
            hello.putPixel(4, 0, 235);
            hello.putPixel(3, 0, 245);
            hello.putPixel(2, 0, 248);
            hello.putPixel(1, 0, 251);
            hello.putPixel(0, 0, 255);

            hello.putPixel(49, 1, 5);
            hello.putPixel(49, 2, 10);
            hello.putPixel(49, 3, 15);
            hello.putPixel(49, 4, 20);
            hello.putPixel(49, 5, 25);
            hello.putPixel(49, 6, 30);
            hello.putPixel(49, 7, 35);
            hello.putPixel(49, 8, 40);
            hello.putPixel(49, 9, 45);
            hello.putPixel(49, 10, 50);
            hello.putPixel(49, 11, 55);
            hello.putPixel(49, 12, 60);
            hello.putPixel(49, 13, 65);
            hello.putPixel(49, 14, 70);
            hello.putPixel(49, 15, 75);
            hello.putPixel(49, 16, 80);
            hello.putPixel(49, 17, 85);
            hello.putPixel(49, 18, 90);
            hello.putPixel(49, 19, 95);
            hello.putPixel(49, 20, 100);
            hello.putPixel(49, 21, 105);
            hello.putPixel(49, 22, 110);
            hello.putPixel(49, 23, 115);
            hello.putPixel(49, 24, 120);
            hello.putPixel(49, 25, 125);
            hello.putPixel(49, 26, 130);
            hello.putPixel(49, 27, 135);
            hello.putPixel(49, 28, 140);
            hello.putPixel(49, 29, 145);
            hello.putPixel(49, 30, 150);
            hello.putPixel(49, 31, 155);
            hello.putPixel(49, 32, 160);
            hello.putPixel(49, 33, 165);
            hello.putPixel(49, 34, 170);
            hello.putPixel(49, 35, 175);
            hello.putPixel(49, 36, 180);
            hello.putPixel(49, 37, 185);
            hello.putPixel(49, 38, 190);
            hello.putPixel(49, 39, 195);
            hello.putPixel(49, 40, 200);
            hello.putPixel(49, 41, 205);
            hello.putPixel(49, 42, 210);
            hello.putPixel(49, 43, 215);
            hello.putPixel(49, 44, 220);
            hello.putPixel(49, 45, 225);
            hello.putPixel(49, 46, 230);
            hello.putPixel(49, 47, 235);
            hello.putPixel(49, 48, 240);
            hello.putPixel(49, 49, 245);

            hello.scrollLeft();

            hello.putPixel(49,0,5);

            hello.putPixel(49, 1, 5);
            hello.putPixel(49, 2, 10);
            hello.putPixel(49, 3, 15);
            hello.putPixel(49, 4, 20);
            hello.putPixel(49, 5, 25);
            hello.putPixel(49, 6, 30);
            hello.putPixel(49, 7, 35);
            hello.putPixel(49, 8, 40);
            hello.putPixel(49, 9, 45);
            hello.putPixel(49, 10, 50);
            hello.putPixel(49, 11, 55);
            hello.putPixel(49, 12, 60);
            hello.putPixel(49, 13, 65);
            hello.putPixel(49, 14, 70);
            hello.putPixel(49, 15, 75);
            hello.putPixel(49, 16, 80);
            hello.putPixel(49, 17, 85);
            hello.putPixel(49, 18, 90);
            hello.putPixel(49, 19, 95);
            hello.putPixel(49, 20, 100);
            hello.putPixel(49, 21, 105);
            hello.putPixel(49, 22, 110);
            hello.putPixel(49, 23, 115);
            hello.putPixel(49, 24, 120);
            hello.putPixel(49, 25, 125);
            hello.putPixel(49, 26, 130);
            hello.putPixel(49, 27, 135);
            hello.putPixel(49, 28, 140);
            hello.putPixel(49, 29, 145);
            hello.putPixel(49, 30, 150);
            hello.putPixel(49, 31, 155);
            hello.putPixel(49, 32, 160);
            hello.putPixel(49, 33, 165);
            hello.putPixel(49, 34, 170);
            hello.putPixel(49, 35, 175);
            hello.putPixel(49, 36, 180);
            hello.putPixel(49, 37, 185);
            hello.putPixel(49, 38, 190);
            hello.putPixel(49, 39, 195);
            hello.putPixel(49, 40, 200);
            hello.putPixel(49, 41, 205);
            hello.putPixel(49, 42, 210);
            hello.putPixel(49, 43, 215);
            hello.putPixel(49, 44, 220);
            hello.putPixel(49, 45, 225);
            hello.putPixel(49, 46, 230);
            hello.putPixel(49, 47, 235);
            hello.putPixel(49, 48, 240);
            hello.putPixel(49, 49, 245);
            
        }, 200);

        timeB();
    }

    if(demoTrue == true && sessionThree == true){

        let h = new BITMAP();
        console.log('hej');

        textfield.innerHTML = 'Blit to display (Copy/Paste)';


            for(let i = 0; i < 50; i++){
                    setTimeout(function (){
                        hello.clear(200);
        
                        h.spriteMaker('run1');  
        
                        hello.blitToDisplay(h, 16, 16, 0, 0, i++, 20);
                    }, 10);
                    setTimeout(function (){
                        hello.clear(200);
        
                        h.spriteMaker('run2');  
        
                        hello.blitToDisplay(h, 16, 16, 0, 0, i++, 20);
                    }, 10);
                    setTimeout(function (){
                        hello.clear(200);
        
                        h.spriteMaker('run3');  
        
                        hello.blitToDisplay(h, 16, 16, 0, 0, i++, 20);
                    }, 10);
                    setTimeout(function (){
                        hello.clear(200);
        
                        h.spriteMaker('run2');  
        
                        hello.blitToDisplay(h, 16, 16, 0, 0, i++, 20);
                    }, 10);
                
            }

        timeC();

    }

    if(demoTrue == true && sessionFour == true){

        textfield.innerHTML = 'Circle';
        for(let i = 0; i < 31; i++){
            setTimeout(function(){console.log('hej');}, i);
                let a = Math.floor(Math.random()*50);
                let b = Math.floor(Math.random()*50);
                let c = Math.floor(Math.random()*10);

                hello.circle(a, b, c, i*8);
            
        }
        timeD();
    }

    if(demoTrue == true && sessionFive == true){

        textfield.innerHTML = 'Rectangle';
        for(let i = 0; i < 31; i++){
            setTimeout(function(){console.log('hej');}, i);
                let a = Math.floor(Math.random()*50);
                let b = Math.floor(Math.random()*50);
                let c = Math.floor(Math.random()*50);
                let d = Math.floor(Math.random()*50);

                hello.rectangle(a, b, c, d, i*8);
            
        }
        timeE();

    }
    if(demoTrue == true && sessionSix == true) {
        textfield.innerHTML = 'Implicit';
        hello.clear(0);
        hello.implicitFunc(x => y => 10*Math.sin((x-10*time)/7)*Math.cos(time) - (y-20),255);
        setTimeout(function() {
            timeF();

        },3000);
        timeF();
    }
    let f = 10;
    if(demoTrue == true && sessionSeven == true) {
        textfield.innerHTML = 'Implicit divided by 10';
        hello.clear(0);
        hello.implicitFunc(x => y => Math.cos(x/f) + Math.sin(y/f),255);
        hello.implicitFunc(x => y => Math.cos(x/5) + Math.sin(y/5),200);
        f--;
    }
    hello.render();
    time += 0.1;
    requestAnimationFrame(render);
}
requestAnimationFrame(render);


function demo(){
    let btn = document.querySelector('#demo');

    demoTrue = !demoTrue;

    if(demoTrue == true){
        btn.style.color = '#fff';
        btn.style.backgroundColor = '#333';
        btn.innerHTML = `<i class="fas fa-pause"></i>Pause`;
    }
    if(demoTrue == false){
        btn.style.color = '#333';
        btn.style.backgroundColor = '#fff';
        btn.innerHTML = `<i class="fas fa-play"></i>Play`;
    }

    return demoTrue;

}

function timeA(){
    setTimeout(function(){ 
        sessionOne = false; 
        sessionTwo = true;
    }, 3000);
}

function timeB(){
    setTimeout(function (){ 
        sessionTwo = false; 
        sessionFour = true;
    }, 3000);
}

function timeC(){
    setTimeout(function (){ 
        sessionThree = false;
        sessionFour = true;
        
    }, 3000);
}

function timeD(){
    setTimeout(function (){ 
        sessionFour = false;
        sessionFive = true;
        
    }, 3000);
}

function timeE(){
    setTimeout(function (){ 
        sessionFive = false;
        sessionSix = true;
        
    }, 3000);
}

function timeF(){
    setTimeout(function(){
        sessionSix = false;
        sessionOne = true;
        // sessionSeven = true;
    },3000);
}
